<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.69c8303230227041b58c.css">html{font-size:100}body{margin:0 0 0 calc(100vw - 100%);color:#222;line-height:1.625;font-size:1rem;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body,h1,h2,h3,h4,h5,h6{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif}h1,h2,h3,h4,h5,h6{font-weight:600}h1{font-size:2.5rem;line-height:3.25rem;margin-top:6.5rem;margin-bottom:1.625rem}h2{font-size:1.6875rem;line-height:2.4375rem}h2,h3{margin-top:3.25rem;margin-bottom:.8125rem}h3{font-size:1.375rem;line-height:1.625rem}h4{font-size:1.2rem;margin-top:2.4375rem}h4,h5{line-height:1.625rem;margin-bottom:.8125rem}h5,h6{font-size:1rem;margin-top:4.0625rem}h6{line-height:1.625rem;margin-bottom:.8125rem}img{max-width:100%;margin:inherit auto}hr,img{border:0;display:block}hr{color:#222;height:1.625rem;margin:3.25rem auto;background-size:100% 26px;background-image:linear-gradient(180deg,transparent 1px,transparent 11px,#222 0,#222 15px,transparent 0,transparent 26px);width:6.25rem}a{color:#5d93ff;text-decoration:none}a:active,a:focus,a:hover{color:#f7a046}b,strong{font-weight:600}ul{list-style:square;margin-bottom:1.625rem}ul li{padding:0 .3125rem;margin-bottom:.625rem}p{line-height:1.625rem;margin-bottom:1.625rem}blockquote{padding:0;font-style:italic;text-align:center}figure{display:block;width:100%;height:auto}figcaption{line-height:1.21875rem;margin-top:.40625rem;color:#222;font-size:.875rem;font-style:italic;margin-bottom:0;text-align:center}.anchor{margin-left:-1.875rem!important;padding-right:.875rem!important}@media screen and (min-width:685px){figure.float-left,figure.float-right{max-width:19.375rem;padding:0 1.625rem}.float-right{float:right}.float-left{float:left}}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.Author-module--author__photo--36xCH{display:inline-block;margin-bottom:0;border-radius:50%;background-clip:padding-box}.Author-module--author__title--2CaTb{font-size:1.125rem;font-weight:600;line-height:1.82813rem;margin:.8125rem 0}.Author-module--author__title-link--Yrism,.Author-module--author__title-link--Yrism:focus,.Author-module--author__title-link--Yrism:hover{color:#222}.Author-module--author__subtitle--cAaEB{color:#888;line-height:1.625rem;margin-bottom:1.625rem}.Icon-module--icon--Gpyvw{display:inline-block;width:1em;height:1em;stroke-width:0;stroke:currentColor;fill:currentColor;font-style:normal;font-weight:400;speak:none;margin-right:.2em;text-align:center;font-variant:normal;text-transform:none;line-height:1em;margin-left:.2em;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.Contacts-module--contacts--1rGd1{margin-bottom:1.625rem}.Contacts-module--contacts__list--3OgdW{display:flex;flex-flow:row wrap;flex-grow:0;flex-shrink:0;list-style:none;padding:0;margin:.625rem -.1875rem;width:8.75rem}.Contacts-module--contacts__list-item--16p9q{padding:0;margin:.25rem;display:flex;align-content:center;align-items:center;justify-content:center;height:2.1875rem;width:2.1875rem;line-height:2.1875rem;border-radius:50%;text-align:center;border:1px solid #ebebeb}.Contacts-module--contacts__list-item-link--2MIDn{border:0;display:flex;color:#222}.Contacts-module--contacts__list-item-link--2MIDn:focus,.Contacts-module--contacts__list-item-link--2MIDn:hover{color:#5d93ff}.Copyright-module--copyright--1ariN{color:#b6b6b6;font-size:.875rem}.Menu-module--menu--Efbin{margin-bottom:1.625rem}.Menu-module--menu__list--31Zeo{list-style:none;padding:0;margin:0}.Menu-module--menu__list-item--1lJ6B{padding:0;margin:.625rem 0}.Menu-module--menu__list-item-link--10Ush{font-size:1rem;color:#222;font-weight:400;border:0}.Menu-module--menu__list-item-link--10Ush:focus,.Menu-module--menu__list-item-link--10Ush:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Menu-module--menu__list-item-link--active--2CbUO{color:#222;border-bottom:1px solid #222}.Sidebar-module--sidebar--X4z2p{width:100%}.Sidebar-module--sidebar__inner--Jdc5s{position:relative;padding:1.5625rem 1.25rem 0}@media screen and (min-width:685px){.Sidebar-module--sidebar--X4z2p{width:calc(41.625% - 1.09375rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(12n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(12n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:1.875rem 1.25rem 0}.Sidebar-module--sidebar__inner--Jdc5s:after{background:#e6e6e6;background:linear-gradient(180deg,#e6e6e6 0,#e6e6e6 48%,#fff);position:absolute;content:"";width:.0625rem;height:33.75rem;top:30px;right:-10px;bottom:0}}@media screen and (min-width:960px){.Sidebar-module--sidebar--X4z2p{width:calc(33.3% - 1.25rem)}.Sidebar-module--sidebar--X4z2p:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Sidebar-module--sidebar--X4z2p:last-child{margin-right:0}.Sidebar-module--sidebar--X4z2p:nth-child(3n){margin-right:0;float:right}.Sidebar-module--sidebar--X4z2p:nth-child(3n+1){clear:both}.Sidebar-module--sidebar__inner--Jdc5s{padding:2.5rem}}.Layout-module--layout--3Pyz6{max-width:66.875rem;margin-left:auto;margin-right:auto}.Layout-module--layout--3Pyz6:before{content:"";display:table}.Layout-module--layout--3Pyz6:after{content:"";display:table;clear:both}.Feed-module--feed__item--2D5rE{margin-bottom:2.03125rem}.Feed-module--feed__item--2D5rE:last-child{margin-bottom:.8125rem}.Feed-module--feed__item-title--3nigr{font-size:1.6875rem;line-height:2.4375rem;margin-top:0;margin-bottom:.8125rem}.Feed-module--feed__item-title-link--iFMRs{color:#222}.Feed-module--feed__item-title-link--iFMRs:focus,.Feed-module--feed__item-title-link--iFMRs:hover{color:#222;border-bottom:1px solid #222}.Feed-module--feed__item-description--1uO8e{font-size:1rem;line-height:1.625rem;margin-bottom:1.21875rem}.Feed-module--feed__item-meta-time--3t1fg{font-size:.875rem;color:#222;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-divider--N-Q0A{margin:0 .3125rem}.Feed-module--feed__item-meta-category-link--23f8F{font-size:.875rem;color:#f7a046;font-weight:600;text-transform:uppercase}.Feed-module--feed__item-meta-category-link--23f8F:focus,.Feed-module--feed__item-meta-category-link--23f8F:hover{color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI{font-size:1rem;color:#5d93ff}.Feed-module--feed__item-readmore--1u6bI:focus,.Feed-module--feed__item-readmore--1u6bI:hover{color:#5d93ff;border-bottom:1px solid #5d93ff}.Page-module--page--2nMky{margin-bottom:3.25rem}.Page-module--page__inner--2M_vz{padding:1.5625rem 1.25rem}.Page-module--page__title--GPD8L{font-size:2.5rem;font-weight:600;line-height:3.25rem;margin-top:0;margin-bottom:2.35625rem}.Page-module--page__body--Ic6i6{font-size:1rem;line-height:1.625rem;margin:0 0 1.625rem}@media screen and (min-width:685px){.Page-module--page--2nMky{width:calc(58.275% - .78125rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(12n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(12n+1){clear:both}.Page-module--page__inner--2M_vz{padding:1.875rem 1.25rem}}@media screen and (min-width:960px){.Page-module--page--2nMky{width:calc(66.6% - .625rem)}.Page-module--page--2nMky:nth-child(1n){float:left;margin-right:1.875rem;clear:none}.Page-module--page--2nMky:last-child{margin-right:0}.Page-module--page--2nMky:nth-child(3n){margin-right:0;float:right}.Page-module--page--2nMky:nth-child(3n+1){clear:both}.Page-module--page__inner--2M_vz{padding:2.5rem 2.1875rem}}.Pagination-module--pagination--2H3nO{margin-top:3.25rem;display:flex}.Pagination-module--pagination__prev--bet5s{width:50%;text-align:left}.Pagination-module--pagination__prev-link--1Nzs6{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__prev-link--1Nzs6:focus,.Pagination-module--pagination__prev-link--1Nzs6:hover{color:#5d93ff}.Pagination-module--pagination__prev-link--disable--Yklx9{pointer-events:none;color:#bbb}.Pagination-module--pagination__next--3hFiN{width:50%;text-align:right}.Pagination-module--pagination__next-link--3FUtA{color:#f7a046;font-size:1.625rem;font-weight:700}.Pagination-module--pagination__next-link--3FUtA:focus,.Pagination-module--pagination__next-link--3FUtA:hover{color:#5d93ff}.Pagination-module--pagination__next-link--disable--30UwZ{pointer-events:none;color:#bbb}.Author-module--author--2Yefr{border-top:1px solid #e6e6e6;max-width:40rem;padding-top:1.25rem;line-height:1.625rem;margin-top:1.625rem;margin-bottom:3.25rem}.Author-module--author__bio-twitter--n-O9n{display:block;text-decoration:underline}@media screen and (min-width:685px){.Author-module--author--2Yefr{margin-left:auto;margin-right:auto}}.Content-module--content--3p512{max-width:59.0625rem;padding:0 .9375rem;margin:0 auto}.Content-module--content__title--2BDW9{font-size:2rem;max-width:40rem;font-weight:600;text-align:center;line-height:2.68125rem;margin:1.625rem auto 0}.Content-module--content__body--2TrQ- figure{margin-bottom:1.625rem}.Content-module--content__body--2TrQ- figure blockquote{font-style:italic;text-align:center;margin-top:0;padding:1.625rem 0}.Content-module--content__body--2TrQ- figure blockquote p{max-width:40rem;font-size:1.6817rem;margin-top:0;margin-bottom:1.625rem;line-height:2.4375rem}.Content-module--content__body--2TrQ- a{text-decoration:underline}.Content-module--content__body--2TrQ- *{max-width:40rem;margin-left:auto;margin-right:auto}.Content-module--content__body--2TrQ- img{max-width:100%}@media screen and (min-width:960px){.Content-module--content--3p512{padding:0}.Content-module--content__title--2BDW9{font-size:3rem;line-height:3.65625rem;margin-top:3.65625rem;margin-bottom:2.4375rem}.Content-module--content__body--2TrQ-,.Content-module--content__body--2TrQ- p{font-size:1.125rem;line-height:1.82813rem;margin-bottom:1.82813rem}}.Meta-module--meta__date--29eD7{font-style:italic}.Tags-module--tags--1L_ct{margin-bottom:.8125rem}.Tags-module--tags__list--91FqN{list-style:none;margin:0 -.625rem;padding:0}.Tags-module--tags__list-item--1M30P{display:inline-block;margin:.625rem .3125rem}.Tags-module--tags__list-item-link--3SL_8{display:inline-block;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;border:1px solid #e6e6e6;text-decoration:none;border-radius:1.25rem;color:#222}.Tags-module--tags__list-item-link--3SL_8:focus,.Tags-module--tags__list-item-link--3SL_8:hover{color:#5d93ff}.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{max-width:40rem;margin:0 auto;padding:0 .9375rem}.Post-module--post__home-button--16Kl0{display:block;max-width:5.625rem;height:2.1875rem;padding:0 1.5rem;line-height:2.1875rem;text-align:center;color:#222;border:1px solid #e6e6e6;border-radius:1.25rem;font-size:1rem;font-weight:400;margin-left:auto;margin-right:auto;margin-top:1.625rem}.Post-module--post__home-button--16Kl0:focus,.Post-module--post__home-button--16Kl0:hover{color:#5d93ff}@media screen and (min-width:960px){.Post-module--post__comments--25y6I,.Post-module--post__footer--3WzWU{padding:0}.Post-module--post__home-button--16Kl0{position:fixed;max-width:auto;margin:0;top:30px;left:30px}}</style><meta name="generator" content="Gatsby 2.22.15"/><link rel="alternate" type="application/rss+xml" title="Rafael Vindel Amor" href="/rss.xml"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-168734060-1"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-168734060-1', {"send_page_view":false});
      }
      </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="icon" href="/favicon-32x32.png?v=dc007e687fb90af842f33677a31016b0"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#F7A046"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=dc007e687fb90af842f33677a31016b0"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=dc007e687fb90af842f33677a31016b0"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=dc007e687fb90af842f33677a31016b0"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=dc007e687fb90af842f33677a31016b0"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=dc007e687fb90af842f33677a31016b0"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=dc007e687fb90af842f33677a31016b0"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=dc007e687fb90af842f33677a31016b0"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=dc007e687fb90af842f33677a31016b0"/><title data-react-helmet="true">Referential Transparency in Scala Pt. I - Pure functions - Rafael Vindel Amor</title><meta data-react-helmet="true" name="description" content="In this post we are going to learn one of the core concepts of Functional Programming (FP), Referential Transparency (RT), and how to carry it out in our Scala applications with the help of pure functions."/><meta data-react-helmet="true" property="og:site_name" content="Referential Transparency in Scala Pt. I - Pure functions - Rafael Vindel Amor"/><meta data-react-helmet="true" property="og:image" content="https://rafaelvindelamor.dev/https:/images.unsplash.com/photo-1496814801204-280c839ea15a?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1347&amp;q=80"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:title" content="Referential Transparency in Scala Pt. I - Pure functions - Rafael Vindel Amor"/><meta data-react-helmet="true" name="twitter:description" content="In this post we are going to learn one of the core concepts of Functional Programming (FP), Referential Transparency (RT), and how to carry it out in our Scala applications with the help of pure functions."/><meta data-react-helmet="true" name="twitter:image" content="https://rafaelvindelamor.dev/https:/images.unsplash.com/photo-1496814801204-280c839ea15a?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1347&amp;q=80"/><link as="script" rel="preload" href="/webpack-runtime-dc4bfcdb97e318deef77.js"/><link as="script" rel="preload" href="/framework-6e11d4e07218876eea4b.js"/><link as="script" rel="preload" href="/532a2f07-5eaf3e57aa62a3931643.js"/><link as="script" rel="preload" href="/app-d754ea836dda916cd710.js"/><link as="script" rel="preload" href="/styles-9b6f388623a2ec93d35f.js"/><link as="script" rel="preload" href="/cd95ea5cbd2c605f26db819f07999610c9ff4310-a99009fae8676b8605c2.js"/><link as="script" rel="preload" href="/643651a62fb35a9bb4f20061cb1f214a352d7976-c6412a4c283a0fb147f0.js"/><link as="script" rel="preload" href="/component---src-templates-post-template-js-7784a9474b2f264f609a.js"/><link as="fetch" rel="preload" href="/page-data/posts/referential-transparency-in-scala-pt-i-pure-functions/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout-module--layout--3Pyz6"><div><a class="Post-module--post__home-button--16Kl0" href="/">All Articles</a><div><div class="Content-module--content--3p512"><h1 class="Content-module--content__title--2BDW9">Referential Transparency in Scala Pt. I - Pure functions</h1><div class="Content-module--content__body--2TrQ-"><p>In this post we are going to learn one of the core concepts of Functional Programming (FP), <strong>Referential Transparency</strong> (RT), and how to carry it out in our Scala applications with the help of <em>pure</em> functions. We are going to see, through some examples, the different problems that could arise while writing our applications and how to handle them.</p>
<p>Just for letting you know, this is the first post of the series <em>Writing Functional Applications in Scala</em>. My idea is to keep writing more posts about different topics that will help you write applications in a better, or even <em>pure</em>, functional style with Scala. It is important to highlight that some basic knowledge about Scala would be helpful to understand the examples written below. However, you can still learn about FP and its concepts as this is something that you can apply to any programming language.</p>
<p>For sure, any feedback is more than welcome! If you have any questions or suggestions, please let me know in the comments below! üòä</p>
<p>With everything said, are you ready? Then, let‚Äôs get started! üí™üèº</p>
<ul>
<li><a href="#what-is-referential-transparency">What is Referential Transparency?</a></li>
<li><a href="#side-effects">Side-effects</a></li>
<li><a href="#pure-functions">Pure functions</a></li>
<li><a href="#conclusions">Conclusions</a></li>
<li><a href="#references">References</a></li>
</ul>
<h2 id="what-is-referential-transparency" style="position:relative;"><a href="#what-is-referential-transparency" aria-label="what is referential transparency permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is Referential Transparency?</h2>
<blockquote>
<p>An expression is <em>referentially transparent</em> if we can replace it with its <strong>value</strong> without changing the application‚Äôs behaviour.</p>
</blockquote>
<p>Good, we have the definition, but‚Ä¶ it is always better to illustrate a new concept with some examples.</p>
<p>Imagine that we have the following function:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">def</span> divide<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> x <span class="token operator">/</span> y</code></pre></div>
<p><code class="language-text">divide</code> is a simple function, right? But it will help us illustrate the previous concept.</p>
<p>Let‚Äôs have a look at the following application:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">val</span> a <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> c <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c

println<span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">output:
6</code></pre></div>
<p>We have a little application that is using the previous function to calculate some <code class="language-text">result</code>. According to the previous definition, if we can replace every function invocation with its value; that function will be <em>referentially transparent</em>.</p>
<p>Let‚Äôs check then if <code class="language-text">divide</code> is meets that rule:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// divide(4, 2)</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// divide(6, 3)</span>
<span class="token keyword">val</span> c <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// divide(8, 4)</span>

<span class="token keyword">val</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c

println<span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">output:
6</code></pre></div>
<p>So far so good. It worked as expected! We have exactly the same behaviour. We proved that <code class="language-text">divide</code> is <em>referentially transparent</em>.</p>
<p>But‚Ä¶ are we totally sure? Let‚Äôs write one more example:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">val</span> a <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// Dividing by 0</span>
<span class="token keyword">val</span> c <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c

println<span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">output:
Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero</code></pre></div>
<p>Oh-oh! We have a problem here! Our function now does not even return a value, it is throwing an <code class="language-text">exception</code>! It makes sense that our function fails, because we were trying to divide by <code class="language-text">0</code> and that is not supported if we work with <code class="language-text">Int</code> type in Scala; but raising an <code class="language-text">exception</code> is not the best way to fail, as we will see later.</p>
<p>If we try to replace the function with its value, we clearly see that we do not know how to do it:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">val</span> b <span class="token operator">=</span> ¬Ø\_<span class="token punctuation">(</span>„ÉÑ<span class="token punctuation">)</span>_<span class="token operator">/</span>¬Ø
<span class="token keyword">val</span> c <span class="token operator">=</span> <span class="token number">2</span>

<span class="token keyword">val</span> result <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c

println<span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre></div>
<p>Even if we throw an <code class="language-text">ArithmeticException</code>, it is not going to be the same <code class="language-text">exception</code> as the previous one. So, in the end, our application is not having the same behaviour.</p>
<p>This proves that, in fact, <code class="language-text">divide</code> is not <em>referentially transparent</em>. Moreover, it is throwing an <code class="language-text">exception</code>, so that means that it has <em>side-effects</em>.</p>
<h3 id="side-effects" style="position:relative;"><a href="#side-effects" aria-label="side effects permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Side-effects</h3>
<blockquote>
<p>We can say that a function has a <em>side-effect</em> if it is modifying the application‚Äôs external state besides calculating the output. In this case, it is raising an <code class="language-text">exception</code>.</p>
</blockquote>
<p>Let‚Äôs try to fix it. As we know now that we will have problems if we divide by <code class="language-text">0</code>, we are going to check that case:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">def</span> divide<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> Option<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> Some<span class="token punctuation">(</span>x <span class="token operator">/</span> y<span class="token punctuation">)</span>
  <span class="token keyword">else</span> None</code></pre></div>
<p>Now, we have to rewrite our application:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">val</span> x <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> y <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> z <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> result <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">{</span>
  a <span class="token keyword">&lt;-</span> x
  b <span class="token keyword">&lt;-</span> y
  c <span class="token keyword">&lt;-</span> z
<span class="token punctuation">}</span> <span class="token keyword">yield</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c

println<span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">output:
None</code></pre></div>
<p>Good! Now we do not have any <code class="language-text">exception</code>. Let‚Äôs see if we can replace the function with its value now:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">val</span> x <span class="token operator">=</span> Some<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// divide(4, 2)</span>
<span class="token keyword">val</span> y <span class="token operator">=</span> None <span class="token comment">// divide(6, 0)</span>
<span class="token keyword">val</span> z <span class="token operator">=</span> Some<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// divide(8, 4)</span>

<span class="token keyword">val</span> result <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">{</span>
  a <span class="token keyword">&lt;-</span> x
  b <span class="token keyword">&lt;-</span> y
  c <span class="token keyword">&lt;-</span> z
<span class="token punctuation">}</span> <span class="token keyword">yield</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c

println<span class="token punctuation">(</span>result<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">output:
None</code></pre></div>
<p>Yeah! It worked! Now, <code class="language-text">divide</code> is <em>referentially transparent</em> and, the really good point here, is that we are working with <strong>values</strong> instead of exceptions. We will see that FP is all about <strong>values</strong> and how our applications interact with them describing <strong>what</strong> we want to do.</p>
<p>In this example, we learnt how to avoid working with exceptions in our application as they do not allow us to write <em>referentially transparent</em> functions. We used <code class="language-text">Option</code> to handle the error case and return <code class="language-text">None</code>, as we do not have a valid value. This, apart from helping us to achieve what we wanted, is even more performant, as throwing exceptions is very expensive.</p>
<p>Let‚Äôs now change a little the <code class="language-text">divide</code> function again because we want to add some debug traces:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">def</span> divide<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span><span class="token operator">:</span> Option<span class="token punctuation">[</span><span class="token builtin">Int</span><span class="token punctuation">]</span> <span class="token operator">=</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span>s<span class="token string">"$x/$y"</span><span class="token punctuation">)</span>
    Some<span class="token punctuation">(</span>x <span class="token operator">/</span> y<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    println<span class="token punctuation">(</span><span class="token string">"(‚ïØ¬∞‚ñ°¬∞)‚ïØÔ∏µ ‚îª‚îÅ‚îª"</span><span class="token punctuation">)</span>
    None
  <span class="token punctuation">}</span></code></pre></div>
<p>And now, we execute the first application again:</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">val</span> x <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> y <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> z <span class="token operator">=</span> divide<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>

<span class="token keyword">val</span> result <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">{</span>
  a <span class="token keyword">&lt;-</span> x
  b <span class="token keyword">&lt;-</span> y
  c <span class="token keyword">&lt;-</span> z
<span class="token punctuation">}</span> <span class="token keyword">yield</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c

result<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">output:
4/2
6/3
8/4
6</code></pre></div>
<p>Our output has changed. Apart from printing the aggregated result, we are now also printing debug information.</p>
<p>Just as before, we are going to use the values instead. What will happen if we do it?</p>
<div class="gatsby-highlight" data-language="scala"><pre class="language-scala"><code class="language-scala"><span class="token keyword">val</span> x <span class="token operator">=</span> Some<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// divide(4, 2)</span>
<span class="token keyword">val</span> y <span class="token operator">=</span> Some<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// divide(6, 3)</span>
<span class="token keyword">val</span> z <span class="token operator">=</span> Some<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// divide(8, 4)</span>

<span class="token keyword">val</span> result <span class="token operator">=</span> <span class="token keyword">for</span> <span class="token punctuation">{</span>
  a <span class="token keyword">&lt;-</span> x
  b <span class="token keyword">&lt;-</span> y
  c <span class="token keyword">&lt;-</span> z
<span class="token punctuation">}</span> <span class="token keyword">yield</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c

result<span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">output:
6</code></pre></div>
<p>Even though we have had the same final value for our <code class="language-text">result</code>, our application‚Äôs behaviour is not the same because we did not print the debug traces. Also, we have again <em>side-effects</em> in our function, as we are printing in the console, an I/O operation.</p>
<p>Well, that totally makes sense, but we forgot something really important: we should avoid <em>side-effects</em>. In fact, we should write <em>pure</em> functions.</p>
<h3 id="pure-functions" style="position:relative;"><a href="#pure-functions" aria-label="pure functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Pure functions</h3>
<blockquote>
<p>We say that a function is a <em>pure</em> function if the result is the same given the same input, not varying the result depending on external factors such as external state or I/O operations, and if the function does not change the application‚Äôs external status, does not have <em>side-effects</em>, for each one of the executions.</p>
</blockquote>
<p>With this definition, we can see that the latest <code class="language-text">divide</code> function is not <em>pure</em> because we are using an I/O operation, which is a <em>side-effect</em>; therefore, it is not <em>referentially transparent</em> and we were not able to substitute it keeping the same application‚Äôs behaviour. The same scenario that we had with the <code class="language-text">exception</code>.</p>
<p>This is something really hard to achieve because, when we write applications, we want them to have <em>side-effects</em> as we want to modify external systems, write logs, access to databases or have metrics in place.</p>
<p>But the real problem does not lay in having <em>side-effects</em>, it is <strong>how</strong> we convert those <em>side-effects</em> into <strong>values</strong> so our functions can be <em>pure</em>.</p>
<p>If you remember, we had already done that when we converted the <code class="language-text">exception</code> into a handled error <code class="language-text">DivisionByZero</code>. But, in this case, we need to convert the <code class="language-text">println</code> result, the I/O operation, into a <strong>value</strong>.</p>
<p>So‚Ä¶ how are we going to do that? ü§î</p>
<h2 id="conclusions" style="position:relative;"><a href="#conclusions" aria-label="conclusions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusions</h2>
<p>We have seen how <strong>Referential Transparency</strong> is tightly related to <em>pure</em> functions and we have checked some examples to clarify them.</p>
<p>In those examples, we faced some problems that were stopping us from having <em>pure</em> functional code: <em>side-effects</em>. We tackled the <code class="language-text">exception</code> scenario but we have still one missing: I/O operations.</p>
<p>We will cover those in the next posts.</p>
<h2 id="references" style="position:relative;"><a href="#references" aria-label="references permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>References</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Referential_transparency" target="_blank" rel="nofollow noopener noreferrer">Referential Transparency</a></li>
<li><a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)" target="_blank" rel="nofollow noopener noreferrer">Side-Effect</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank" rel="nofollow noopener noreferrer">Pure Functions</a></li>
<li><a href="https://unsplash.com/photos/3cWA3U8xb5w" target="_blank" rel="nofollow noopener noreferrer">Unsplash Wallpaper</a></li>
</ul></div></div></div><div class="Post-module--post__footer--3WzWU"><div><p class="Meta-module--meta__date--29eD7">Published <!-- -->7 Jun 2020</p></div><div class="Tags-module--tags--1L_ct"><ul class="Tags-module--tags__list--91FqN"><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/fp/">fp</a></li><li class="Tags-module--tags__list-item--1M30P"><a class="Tags-module--tags__list-item-link--3SL_8" href="/tag/scala/">scala</a></li></ul></div></div><div class="Post-module--post__comments--25y6I"></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/referential-transparency-in-scala-pt-i-pure-functions";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d754ea836dda916cd710.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-e8e7fbb006d57d32ed40.js"],"component---src-templates-categories-list-template-js":["/component---src-templates-categories-list-template-js-8e9d064a76608cd132b8.js"],"component---src-templates-category-template-js":["/component---src-templates-category-template-js-afa87124100737eb8dc8.js"],"component---src-templates-index-template-js":["/component---src-templates-index-template-js-02157cd53926988b6dc7.js"],"component---src-templates-not-found-template-js":["/component---src-templates-not-found-template-js-80cfa202a97f03231d48.js"],"component---src-templates-page-template-js":["/component---src-templates-page-template-js-22c1aaeaaa6b089c8254.js"],"component---src-templates-post-template-js":["/component---src-templates-post-template-js-7784a9474b2f264f609a.js"],"component---src-templates-tag-template-js":["/component---src-templates-tag-template-js-4a904735c09282ecebc2.js"],"component---src-templates-tags-list-template-js":["/component---src-templates-tags-list-template-js-ba2b4f0c966d40e8d5a5.js"]};/*]]>*/</script><script src="/component---src-templates-post-template-js-7784a9474b2f264f609a.js" async=""></script><script src="/643651a62fb35a9bb4f20061cb1f214a352d7976-c6412a4c283a0fb147f0.js" async=""></script><script src="/cd95ea5cbd2c605f26db819f07999610c9ff4310-a99009fae8676b8605c2.js" async=""></script><script src="/styles-9b6f388623a2ec93d35f.js" async=""></script><script src="/app-d754ea836dda916cd710.js" async=""></script><script src="/532a2f07-5eaf3e57aa62a3931643.js" async=""></script><script src="/framework-6e11d4e07218876eea4b.js" async=""></script><script src="/webpack-runtime-dc4bfcdb97e318deef77.js" async=""></script></body></html>